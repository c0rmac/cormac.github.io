<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"> <!-- begin SEO --><title>Derive a function that simulates an unbiased coin toss - Coding Challenge 1 - Cormac Kinsella</title><meta property="og:locale" content="en-US"><meta property="og:site_name" content="Cormac Kinsella"><meta property="og:title" content="Derive a function that simulates an unbiased coin toss - Coding Challenge 1"><link rel="canonical" href="https://c0rmac.github.io/posts/2022/12/coding-challenge-1/"><meta property="og:url" content="https://c0rmac.github.io/posts/2022/12/coding-challenge-1/"><meta property="og:description" content=" Suppose toss_biased is a function which returns Heads (H) or Tails (T) with probability $p$ and $q$, \(p \neq q\), ie. the toss is biased. Derive a function that simulates an unbiased coin toss"><meta property="og:type" content="article"><meta property="article:published_time" content="2022-12-18T00:00:00-08:00"> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "Person", "name" : "Cormac Kinsella", "url" : "https://c0rmac.github.io", "sameAs" : null } </script> <!-- end SEO --><link href="https://c0rmac.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Cormac Kinsella Feed"> <!-- http://t.co/dKP3o1e --><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1.0"> <script> document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js '; </script> <!-- For all browsers --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"><link rel="stylesheet" href="https://c0rmac.github.io/assets/css/main.css"><meta http-equiv="cleartype" content="on"> <!-- start custom head snippets --><link rel="apple-touch-icon" sizes="57x57" href="https://c0rmac.github.io/images/apple-touch-icon-57x57.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="60x60" href="https://c0rmac.github.io/images/apple-touch-icon-60x60.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="72x72" href="https://c0rmac.github.io/images/apple-touch-icon-72x72.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="76x76" href="https://c0rmac.github.io/images/apple-touch-icon-76x76.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="114x114" href="https://c0rmac.github.io/images/apple-touch-icon-114x114.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="120x120" href="https://c0rmac.github.io/images/apple-touch-icon-120x120.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="144x144" href="https://c0rmac.github.io/images/apple-touch-icon-144x144.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="152x152" href="https://c0rmac.github.io/images/apple-touch-icon-152x152.png?v=M44lzPylqQ"><link rel="apple-touch-icon" sizes="180x180" href="https://c0rmac.github.io/images/apple-touch-icon-180x180.png?v=M44lzPylqQ"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96"><link rel="icon" type="image/png" href="https://c0rmac.github.io/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16"><link rel="manifest" href="https://c0rmac.github.io/images/manifest.json?v=M44lzPylqQ"><link rel="mask-icon" href="https://c0rmac.github.io/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000"><link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ"><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="https://c0rmac.github.io/images/mstile-144x144.png?v=M44lzPylqQ"><meta name="msapplication-config" content="https://c0rmac.github.io/images/browserconfig.xml?v=M44lzPylqQ"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="https://c0rmac.github.io/assets/css/academicons.css"/> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } }); </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } }); </script> <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script> <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> <!-- end custom head snippets --></head><body> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"> <button><div class="navicon"></div></button><ul class="visible-links"><li class="masthead__menu-item masthead__menu-item--lg"><a href="https://c0rmac.github.io/">Cormac Kinsella</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/year-archive/">Blog</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/teaching/">Teaching</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/portfolio/">Portfolio</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/cv/">CV</a></li><li class="masthead__menu-item"><a href="https://c0rmac.github.io/publications/">Publications</a></li><li class="masthead__menu-item"><a href="/ga/posts/2022/12/coding-challenge-1/">Use site in Irish Gaelic</a></li></ul><ul class="hidden-links hidden"></ul></nav></div></div></div><div id="main" role="main"><div class="sidebar sticky"><div itemscope itemtype="http://schema.org/Person"><div class="author__avatar"> <img src="https://c0rmac.github.io/images/profile.jpeg" class="author__avatar" alt="Cormac Kinsella"></div><div class="author__content"><h3 class="author__name">Cormac Kinsella</h3><p class="author__bio">Mathematics Master Student and Software Engineer</p></div><div class="author__urls-wrapper"> <button class="btn btn--inverse">Follow</button><ul class="author__urls social-icons"><li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Munich, Germany</li><li><a href="https://twitter.com/cormacpjk00"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li><li><a href="https://github.com/c0rmac"><i class="fab fa-fw fa-github" aria-hidden="true"></i> Github</a></li></ul></div></div></div><article class="page" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="headline" content="Derive a function that simulates an unbiased coin toss - Coding Challenge 1"><meta itemprop="description" content=" Suppose toss_biased is a function which returns Heads (H) or Tails (T) with probability $p$ and $q$, \(p \neq q\), ie. the toss is biased. Derive a function that simulates an unbiased coin toss"><meta itemprop="datePublished" content="December 18, 2022"><div class="page__inner-wrap"><header><h1 class="page__title" itemprop="headline">Derive a function that simulates an unbiased coin toss - Coding Challenge 1</h1><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 2 minute read</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2022-12-18T00:00:00-08:00">December 18, 2022</time></p></header><section class="page__content" itemprop="text"><blockquote><p>Suppose toss_biased is a function which returns Heads (H) or Tails (T) with probability $p$ and $q$, \(p \neq q\), ie. the toss is biased. <br /><br /> Derive a function that simulates an unbiased coin toss</p></blockquote><p>Consider two independent coins</p>\[B^{(1)} \sim \text{ toss_biased() } \\ B^{(2)} \sim \text{ toss_biased() } \notag\]<p>In addition, consider the following pairs of events</p>\[\begin{align} \{H^{(1)}H^{(2)}\}, \{T^{(1)}T^{(2)}\} \notag \\ \{H^{(1)}T^{(2)}\}, \{T^{(1)}H^{(2)}\} \notag \end{align} \notag\]<p>where $H^{(i)}, T^{(i)}$ are the events that coin $B^{(i)}$ outputs $H$ or $T$.</p><p>Due to independence, the probability can be calculated by the product rule $P(B^{(1)}, B^{(2)})=P(B^{(1)})P(B^{(2)})$. Hence, we can compute their joint probabilities</p><table><thead><tr><th>$P$</th><th>$H^{(1)}$</th><th>$T^{(1)}$</th></tr></thead><tbody><tr><td>$H^{(2)}$</td><td>$p^2$</td><td>$pq$</td></tr><tr><td>$T^{(2)}$</td><td>$pq$</td><td>$q^2$</td></tr></tbody></table><p>Now note that $P(H^{(1)},T^{(2)})=P(T^{(1)},H^{(2)})$. We will exploit this property to come up with a motivating solution to this challenge. Let</p>\[\bar{H}=\{H^{(1)}T^{(2)}\}\\ \bar{T}=\{T^{(1)}H^{(2)}\} \notag\]<p>be the possible outcomes of the new coin $\bar{B}$. It is clear from the above property that</p>\[P(\bar{H}) = P(\bar{T}) \notag\]<p>and $\bar{B}$ is therefore an unbiased coin. Also, consider the following sets</p>\[J=\{H^{(1)}T^{(2)},T^{(1)}H^{(2)}\}=\{\bar{H},\bar{T}\}\\ K=\{H^{(1)}H^{(2)},T^{(1)}T^{(2)}\} \notag\]<p>Note that $r:=P(J)=2pq$ and $s:=P(K)=p^2+q^2$. We may plot the above events as a tree below</p><div style="text-align: center; padding-bottom: 16px;"> <img src="/images/posts/coding-challenge-1/tree-graph.gv.svg?raw=true" alt="Léaráid Mharkov den phróiseas togartha" /></div><p>$J$ is the only event in which the events $\bar{H}$ or $\bar{T}$ are attained and we want event $J$ to occur to obtain its unbiased result. We will need to run the process recursively for $J$ to occur. Therefore, its natural to consider the above tree diagram as a Markov process $X_n$</p><div style="text-align: center; padding-bottom: 16px;"> <img src="/images/posts/coding-challenge-1/markov-graph.gv.svg?raw=true" alt="Léaráid Mharkov den phróiseas togartha" /> $ P = \begin{bmatrix} r &amp; s \\ 0 &amp; 1 \end{bmatrix} $</div><p>Note that $P(T_J = k) = s^{k-1}r$. We shall calculate $T_J$ until $X_n = K$ for some $n \geq 1$. The probability that $K$ is reached as $n \to \infty$, i.e. that $K$ will be reached after infinite steps, is</p>\[\begin{align} P(T_J \geq 0) &amp;= \sum^{\infty}_{k=1} P(T_J = k)\notag \\ &amp;= \sum^{\infty}_{k=1} s^{k-1}r \notag \\ &amp;= \frac{r}{1-s} \notag \\ &amp;= \frac{2pq}{1-p^2-q^2} \notag \\ &amp;= 1 \notag \end{align} \notag\]<p>Therefore, event $J$ occurs after an infinite number of steps. So now that we know that $J$ occurs almost certainly, we shall consider the following function</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unbiased_toss() {
  b1 = toss_biased()
  b2 = toss_biased()

  if b1 == b2 {
    # Teagmhas K
    # Still waiting for the event J to occur which has an unbiased result.
     # We will execute unbiased_toss again.
    return unbiased_toss()
  } else {
    # Teagmhas J
    # Give an unbiased result.
    if (b1 == H) {
      return H_unbiased
    } else {
      return T_unbiased
    }
  }
}
</code></pre></div></div></section><footer class="page__meta"><p class="page__taxonomy"> <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong> <span itemprop="keywords"> <a href="https://c0rmac.github.io/tags/#biased" class="page__taxonomy-item" rel="tag">biased</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#coding-challenge" class="page__taxonomy-item" rel="tag">coding challenge</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#coin" class="page__taxonomy-item" rel="tag">coin</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#simulate" class="page__taxonomy-item" rel="tag">simulate</a><span class="sep">, </span> <a href="https://c0rmac.github.io/tags/#unbiased" class="page__taxonomy-item" rel="tag">unbiased</a> </span></p></footer><section class="page__share"><h4 class="page__share-title">Share on</h4><a href="https://twitter.com/intent/tweet?text=https://c0rmac.github.io/posts/2022/12/coding-challenge-1/" class="btn btn--twitter" title="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://c0rmac.github.io/posts/2022/12/coding-challenge-1/" class="btn btn--facebook" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://c0rmac.github.io/posts/2022/12/coding-challenge-1/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a></section><nav class="pagination"> <a href="#" class="pagination--pager disabled">Previous</a> <a href="https://c0rmac.github.io/posts/2023/1/bcms-upload-1/" class="pagination--pager" title="Public Documentation on BCMS Upload Services ">Next</a></nav></div></article><div class="page__related"><h4 class="page__related-title">You May Also Enjoy</h4><div class="grid__wrapper"><div class="grid__item"><article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="https://c0rmac.github.io/posts/2023/1/bcms-upload-1/" rel="permalink">Public Documentation on BCMS Upload Services </a></h2><p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 5 minute read</p><p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2023-01-05T00:00:00-08:00">January 05, 2023</time></p><p class="archive__item-excerpt" itemprop="description"><p>I provide public documentation of my work regarding <a href="/portfolio/bcms-upload/">BCMS Upload Services</a> in this article where you can see how I structured the application and what decisions led me to those structures be implemented in the application. I show my own way of creating an application and apply my principles which are shown in my work in <code class="language-plaintext highlighter-rouge">trin-app</code> and <code class="language-plaintext highlighter-rouge">trin-react</code>.</p></p></article></div></div></div></div><div class="page__footer"><footer> <!-- start custom footer snippets --> <a href="/sitemap/">Sitemap</a> <!-- end custom footer snippets --><div class="page__footer-follow"><ul class="social-icons"><li><strong>Follow:</strong></li><li><a href="http://github.com/c0rmac"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li><li><a href="https://c0rmac.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li></ul></div><div class="page__footer-copyright">&copy; 2025 Cormac Kinsella. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <script src="https://c0rmac.github.io/assets/js/main.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script></body></html>
